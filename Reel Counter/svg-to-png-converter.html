<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG to PNG Converter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .icon-preview {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .icon-item {
            text-align: center;
            padding: 10px;
            border: 2px dashed #ddd;
            border-radius: 8px;
        }
        .icon-item img {
            display: block;
            margin: 10px auto;
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #764ba2;
        }
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        canvas {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Instagram Reels Counter - Icon Converter</h1>
        
        <div class="instructions">
            <h3>Instructions:</h3>
            <ol>
                <li>This tool converts the SVG icons to PNG format for the Chrome extension</li>
                <li>Click "Convert SVGs to PNG" to generate the PNG files</li>
                <li>Right-click on each generated image and "Save As" to your extension folder</li>
                <li>Name them: icon16.png, icon48.png, and icon128.png</li>
                <li>Update the manifest.json to use .png instead of .svg</li>
            </ol>
        </div>

        <button onclick="convertAllIcons()">Convert SVGs to PNG</button>
        <button onclick="clearResults()">Clear</button>

        <div class="icon-preview" id="results"></div>

        <!-- Hidden canvases for conversion -->
        <canvas id="canvas16"></canvas>
        <canvas id="canvas48"></canvas>
        <canvas id="canvas128"></canvas>
    </div>

    <script>
        const svgData = {
            16: `<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">
  <circle cx="8" cy="8" r="6" fill="#667eea" stroke="#764ba2" stroke-width="1"/>
  <circle cx="8" cy="8" r="3" fill="white" stroke="#764ba2" stroke-width="1"/>
  <text x="8" y="10" text-anchor="middle" font-family="Arial, sans-serif" font-size="6" font-weight="bold" fill="#764ba2">#</text>
</svg>`,
            48: `<svg width="48" height="48" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
    </linearGradient>
  </defs>
  <circle cx="24" cy="24" r="20" fill="url(#grad1)" stroke="#4a5568" stroke-width="2"/>
  
  <!-- Film reel holes -->
  <circle cx="24" cy="10" r="2" fill="white" stroke="#4a5568" stroke-width="1"/>
  <circle cx="35" cy="16" r="2" fill="white" stroke="#4a5568" stroke-width="1"/>
  <circle cx="35" cy="32" r="2" fill="white" stroke="#4a5568" stroke-width="1"/>
  <circle cx="24" cy="38" r="2" fill="white" stroke="#4a5568" stroke-width="1"/>
  <circle cx="13" cy="32" r="2" fill="white" stroke="#4a5568" stroke-width="1"/>
  <circle cx="13" cy="16" r="2" fill="white" stroke="#4a5568" stroke-width="1"/>
  
  <!-- Center circle -->
  <circle cx="24" cy="24" r="8" fill="white" stroke="#4a5568" stroke-width="2"/>
  <text x="24" y="28" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#764ba2">123</text>
</svg>`,
            128: `<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Main circle with gradient -->
  <circle cx="64" cy="64" r="56" fill="url(#grad1)" stroke="#4a5568" stroke-width="4" filter="url(#shadow)"/>
  
  <!-- Film reel holes around the circle -->
  <circle cx="64" cy="20" r="6" fill="white" stroke="#4a5568" stroke-width="2"/>
  <circle cx="96" cy="32" r="6" fill="white" stroke="#4a5568" stroke-width="2"/>
  <circle cx="108" cy="64" r="6" fill="white" stroke="#4a5568" stroke-width="2"/>
  <circle cx="96" cy="96" r="6" fill="white" stroke="#4a5568" stroke-width="2"/>
  <circle cx="64" cy="108" r="6" fill="white" stroke="#4a5568" stroke-width="2"/>
  <circle cx="32" cy="96" r="6" fill="white" stroke="#4a5568" stroke-width="2"/>
  <circle cx="20" cy="64" r="6" fill="white" stroke="#4a5568" stroke-width="2"/>
  <circle cx="32" cy="32" r="6" fill="white" stroke="#4a5568" stroke-width="2"/>
  
  <!-- Center circle -->
  <circle cx="64" cy="64" r="24" fill="white" stroke="#4a5568" stroke-width="3"/>
  
  <!-- Counter text -->
  <text x="64" y="72" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#764ba2">123</text>
  
  <!-- Small decorative elements -->
  <circle cx="64" cy="64" r="36" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1" stroke-dasharray="2,2"/>
</svg>`
        };

        function convertSvgToPng(svgString, size, canvasId) {
            return new Promise((resolve) => {
                const canvas = document.getElementById(canvasId);
                const ctx = canvas.getContext('2d');
                canvas.width = size;
                canvas.height = size;

                const img = new Image();
                const svgBlob = new Blob([svgString], {type: 'image/svg+xml'});
                const url = URL.createObjectURL(svgBlob);

                img.onload = function() {
                    ctx.clearRect(0, 0, size, size);
                    ctx.drawImage(img, 0, 0, size, size);
                    
                    const pngDataUrl = canvas.toDataURL('image/png');
                    URL.revokeObjectURL(url);
                    resolve(pngDataUrl);
                };

                img.src = url;
            });
        }

        async function convertAllIcons() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<p>Converting icons...</p>';

            try {
                for (const [size, svgContent] of Object.entries(svgData)) {
                    const pngDataUrl = await convertSvgToPng(svgContent, parseInt(size), `canvas${size}`);
                    
                    const iconItem = document.createElement('div');
                    iconItem.className = 'icon-item';
                    iconItem.innerHTML = `
                        <h3>icon${size}.png</h3>
                        <img src="${pngDataUrl}" alt="Icon ${size}x${size}" style="border: 1px solid #ccc;" />
                        <br>
                        <small>${size}x${size} pixels</small>
                        <br>
                        <button onclick="downloadPng('${pngDataUrl}', 'icon${size}.png')">Download PNG</button>
                    `;
                    resultsDiv.appendChild(iconItem);
                }
                
                resultsDiv.insertAdjacentHTML('afterbegin', '<p style="color: green; font-weight: bold;">✅ Conversion complete! Right-click images to save, or use download buttons.</p>');
                
            } catch (error) {
                resultsDiv.innerHTML = '<p style="color: red;">❌ Error converting icons: ' + error.message + '</p>';
            }
        }

        function downloadPng(dataUrl, filename) {
            const link = document.createElement('a');
            link.download = filename;
            link.href = dataUrl;
            link.click();
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }
    </script>
</body>
</html>
